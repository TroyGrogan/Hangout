<!doctype html>
<html lang="en" style="background-color: #00B488;">
  <head>
    <meta charset="UTF-8" />
    
    <!-- Favicons with solid backgrounds - no transparency -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg?v=2" />
    <link rel="icon" type="image/png" sizes="32x32" href="/icon-128x128.png?v=2" />
    <link rel="icon" type="image/png" sizes="16x16" href="/icon-72x72.png?v=2" />
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.svg?v=2" />
    
    <!-- Apple Touch Icons with solid backgrounds for Safari -->
    <!-- Order matters for Safari - most specific first -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="/icon-152x152.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="/icon-144x144.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="/icon-128x128.png" />
    <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json" />
    
    <!-- Mobile Meta Tags -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#00B488" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Hangout" />
    <meta name="apple-touch-fullscreen" content="yes" />
    
    <!-- Force Safari to recognize solid background -->
    <meta name="msapplication-TileColor" content="#00B488" />
    <meta name="msapplication-TileImage" content="/icon-144x144.png" />
    
    <!-- Additional PWA Meta -->
    <meta name="description" content="Hangout - Connect, Chat, and Discover Events" />
    <meta name="keywords" content="hangout, events, social, chat, friends" />
    
    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Hangout" />
    <meta property="og:description" content="Connect, Chat, and Discover Events" />
    <meta property="og:image" content="/icon-512x512.png" />
    
    <title>Hangout</title>
  </head>
  <body style="background-color: #00B488; margin: 0; padding: 0;">
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
    
    <!-- SPA Routing and Page State Preservation Script -->
    <script>
      (function() {
        // Capture the current URL before the page loads
        const currentPath = window.location.pathname;
        const currentSearch = window.location.search;
        const currentHash = window.location.hash;
        const fullUrl = currentPath + currentSearch + currentHash;
        
        // Store the current URL for React Router to use
        if (currentPath !== '/') {
          window.__INITIAL_PATH__ = fullUrl;
          console.log('[SPA Router] Captured initial path:', fullUrl);
        }
        
        // Also store in sessionStorage as backup
        if (currentPath !== '/') {
          sessionStorage.setItem('lastVisitedPath', fullUrl);
          console.log('[SPA Router] Stored path in sessionStorage:', fullUrl);
        }
        
        // Handle direct navigation to routes
        // This ensures that if someone navigates directly to a route,
        // React Router will handle it properly
        if (currentPath !== '/' && currentPath !== '/index.html') {
          // Set a flag that React Router can check
          window.__DIRECT_NAVIGATION__ = true;
          console.log('[SPA Router] Direct navigation detected to:', currentPath);
        }
      })();
    </script>
  </body>
</html>
